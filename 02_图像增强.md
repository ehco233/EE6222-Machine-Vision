## outline

- 图像点处理方法
- 直方图均衡化
- 图像平滑
- 图像锐化
- 非线性图像处理

## 图像点处理方法

图像的的处理都是针对每一个像素点，且只与当前的像素点有关，也称之为无记忆性。

可以用数学表达式表示为：

$$
g = T(f)
$$

其中，f为输入图像，g为输出图像，T为变换函数。

典型的点处理方法：

- Gamma Correction

  $$
  g = T(f) = c f^{\gamma}
  $$

  其中c为常数，通常设置为1，$\gamma$为参数，主要负责调整图像的**亮度**和**对比度**。- $\gamma > 1$ 图像变暗，高亮度部分被压缩，中间值降低，所以图像变暗

  - $\gamma < 1$ 图像变亮，低亮度区域会得到较大的输出值，提高图像的亮度和暗部细节
  - $\gamma = 1$ 图像亮度不变
- Log变换

  $$
  g = T(f) = c \log(1 + f)
  $$

  其中，f为输入像素值，通常先归一化到[0,1]之间，c为常数，控制图像变换的**亮度**

  - 由于log本身的特性，其导数在暗处比较大，经过log变化后，其变化的幅度会更大，而在亮处比较小。故会将暗部的细节放大，而且防止亮部的信息过多，达到比较好的动态平衡的效果。
  - 参数c负责变换后的整体的亮度水平，c值越大，图像越亮。

## 直方图均衡化

直方图均衡化的主要目的是：输出图像的直方图尽可能的均匀，避免图像聚集在亮度或者暗部区域，是图片包含更多细节，更具有层次感。适合于整体过暗或者过亮的图像，可以展示更多的细节。

输入图像的累积分布函数为：

$$
c_f = \sum_{t=0}^{f} p_f(t) = \sum_{t=0}^f \frac{n_t}{n}
$$

$$
g = T(f) = round [\frac{c(f)-c_{min}}{1-c_{min}} L]
$$

其中，L为最大的灰度级，$c_{min}$为累积分布函数的最小值。

## 图像平滑

图像平滑的主要目的是去除图片中的噪声和细节，核心是利用低通滤波器抑制图像中的高频成分，保留低频信息。可以在时域和频域操作。

- 时域线性滤波

  $$
  g(x,y) = f(x,y)*h(x,y) = \sum_{j=- \infty}^{\infty} \sum_{i=-\infty}^{\infty} h(i,j)f(x-i,y-j)
  $$

  - 需要注意的是这里的卷积计算时将h翻转180度，然后再进行计算。有的资料卷积计算不会翻转的原因是在设计h的时候就已经翻转了，之后在进行运算。
  - 典型的滤波器
    - 均值滤波器
      - 均值滤波器将所有的像素进行平均，可以有效的去除高斯噪声，但是会导致图片模糊
    - 高斯滤波器
      - 高斯滤波的系数符合高斯分布，可以比较平衡的去除噪声，并不会模糊。
- 频域滤波

  $$
  G(u,v) = F(u,v)H(u,v)
  $$

  - 理想低通滤波器

    $$
    H(u, v) = \begin{cases}
    1, & \text{if } D(u, v) \le D_0 \\
    0, & \text{if } D(u, v) > D_0
    \end{cases}
    $$

    $$
    D(u, v) = \sqrt{u^2 + v^2}
    $$

    - 可以滤除高频信号，保留低频信号
    - 存在振铃问题
      主要因为理想低通滤波器的截止频率处发生突变，根据傅立叶变化的性质，这种不连续性会在时域产生振荡和副瓣，也就是Gibbs现象。
      - 频域的响应逆傅立叶变换后的函数为sinc函数，sinc函数在时域无限延伸，而且随着t增加，幅值虽然衰减，但仍然有明显的副瓣。其在时域卷积，在信号的边缘或者不连续处就会出现震荡，导致信号出现超调或者下冲，进而出现振铃现象。
  - 高斯低通滤波器

    $$
    h(x, y) = \frac{1}{2\pi\sigma^2} e^{-\frac{x^2 + y^2}{2\sigma^2}}
    $$

    $$
    H(u, v) = e^{- \frac{D(u,v)^2}{2D_o^2}}
    $$

    - 高斯低通滤波可以对高频成分逐步衰减，而不是直接切断，因此其在时域和频域都有良好的平滑性，也不会产生明显的振铃。
    - 二维高斯滤波可以分解为两个一维高斯滤波，减少计算量。

## 图像锐化

图像锐化主要是抑制低频成分，保留高频成分，进而保留图片的更多细节。

- 理想高通滤波器
- $$
  H_{hp}(u, v) = 1 - H_{lp}(u, v)
  $$

  其中$H_{hp}$为高通滤波器，$H_{lp}$为低通滤波器。
- 高斯高通滤波器

  $$
  H(u, v) = 1-e^{- \frac{D(u,v)^2}{2D_o^2}}
  $$
- high-boost filter

  与高频滤波只提取高频信息不同，high-boost在保留低频信息的同时增强高频细节。

  $$
  g(x,y)=f(x,y)+(A-1)[f(x,y)-f_{lp}(x,y)]
  $$

  其中：$f(x,y)-f_{lp}(x,y)$ 表示高频分量（Mask掩膜），即为要增强的细节和边缘。当$A=1$时，相当于高通滤波。

## 非线性图像处理
